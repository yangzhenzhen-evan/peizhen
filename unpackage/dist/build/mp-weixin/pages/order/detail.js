"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("navbar")+e.resolveComponent("uni-steps")+e.resolveComponent("uni-countdown")+e.resolveComponent("headline")+e.resolveComponent("uni-popup-dialog")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../components/navbar/navbar.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-steps/uni-steps.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-countdown/uni-countdown.js")+(()=>"../../components/headline/headline.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js"))();const a={__name:"detail",setup(a){const t=getApp(),o=e.ref([]),l=e.ref(0);o.value=[{title:"填写订单"},{title:"在线支付"},{title:"专人服务"},{title:"服务完成"}];const u=e.ref(),n=e.ref({}),s={"待支付":1,"待服务":2,"已完成":3,"已取消":null};e.onLoad((e=>{i(e.oid)}));const i=async a=>{const o=await t.globalData.apis.getOrdDetail(a,e.index.getStorageSync("token"));n.value=o.data,l.value=s[o.data.trade_state],n.value._exp_time},v=()=>{u.value.open("center");const a=new e.UQRCode;a.data=n.value.code_url,a.size=150,a.make();const t=e.index.createCanvasContext("qrcode");a.canvasContext=t,a.drawCanvas()},d=()=>{u.value.close(),e.index.switchTab({url:"./order"})},r=e.computed((()=>t.globalData.common.toDate(n.value.order_start_time))),p=e.computed((()=>t.globalData.common.toDate(n.value.starttime))),c=()=>{e.index.makePhoneCall({phoneNumber:n.value._staff.mobile})};return(a,t)=>e.e({a:e.p({title:"订单详情"}),b:e.p({options:o.value,active:l.value,"active-color":"white"}),c:1==l.value},1==l.value?{d:e.o((e=>i(n.value.out_trade_no))),e:e.p({"show-day":!1,hour:0,minute:30,second:0}),f:e.t(n.value.price),g:e.o(v)}:2==l.value?e.e({i:0==a.service_state},(a.service_state,{}),{j:1==a.service_state,k:1==a.service_state},1==a.service_state?{l:e.p({title:"本次服务专员"}),m:n.value._staff.avatar_url,n:e.t(n.value._staff.nickname),o:e.o(c)}:{}):(l.value,{}),{h:2==l.value,p:3==l.value,q:!l.value,r:e.p({title:"预约信息"}),s:e.t(n.value.service_name),t:e.t(n.value.hospital_name),v:e.t(r.value),w:40==n.value.service_stype},40==n.value.service_stype?{x:e.t(n.value.address.userName)}:{z:e.t(n.value.client_name)},{y:15==n.value.service_stype,A:40==n.value.service_stype},40==n.value.service_stype?{B:e.t(n.value.address.cityName),C:e.t(n.value.address.countyName+n.value.address.detailInfo)}:{E:e.t(n.value.receiveAddress)},{D:15==n.value.service_stype,F:n.value.demand,G:0!==l.value&&null!==l.value},0!==l.value&&null!==l.value?{H:e.p({title:"订单信息"}),I:e.t(n.value.tel),J:e.t(p.value),K:e.t(n.value.price),L:e.t(n.value.out_trade_no)}:{},{M:e.o(d),N:e.p({type:"info",confirmText:"关闭",title:"支付二维码",content:"欢迎使用 uni-popup!",showClose:!1}),O:e.sr(u,"d983b2ed-6",{k:"payDialog"}),P:e.p({type:"dialog"})})}},t=e._export_sfc(a,[["__scopeId","data-v-d983b2ed"]]);wx.createPage(t);
